#老雷php开发全栈教程#了解websocket协议

我们主要实现私聊和群聊两个功能,要在web端实现想微信QQ那样的即时通讯的功能，我们需要了解一下websocket。
websocket是一种可以双向通讯的长连接协议，http是获取完数据就关闭，websocket则可以一直连接，就像铺了一条管道一样，水可以一直流着。

参考文章：https://www.cnblogs.com/cxx8181602/p/10142140.html

一、websocket前端
	var ws = new WebSocket("ws://127.0.0.1.com:8282");
	ws.open=function(){
		var msg = JSON.stringify({
			type: "login",
			content: "login"
		});
		ws.send(msg);
	}
	ws.onmessage = function (e){ 
		console.log(e);
		//服务器发送的内容
		var res = JSON.parse(e.data);
		switch(res.type){
			case "login":
				
				break;
			case "pm":
				
				break;
			case "groupPm":
				
				break;
				
		}
	}
	ws.onerror=function (e){ 
		console.log(e);
	}
	ws.onclose=function (e){ 
		console.log(e);
	}